<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Safe Space | For Babde</title>
    <style>
        :root {
            --midnight: #0b0d17;
            --lavender: #b794f4;
            --rose-gold: #e9baaa;
            --gold: #ffd700;
            --snapchat: #FFFC00;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--midnight);
            color: white;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: none;
        }

        /* --- Galaxy Background --- */
        #galaxy-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }
        .nebula {
            position: absolute; width: 200%; height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(183, 148, 244, 0.08), transparent 50%);
            top: -50%; left: -50%; animation: drift 40s infinite linear; pointer-events: none;
        }
        @keyframes drift { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* --- Breathing Pulse --- */
        #pulse-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            animation: pulse-glow 19s infinite ease-in-out; pointer-events: none;
        }
        @keyframes pulse-glow {
            0%, 100% { background: rgba(0,0,0,0); }
            21% { background: rgba(183, 148, 244, 0.12); } 
            58% { background: rgba(183, 148, 244, 0.12); }
            100% { background: rgba(0,0,0,0); }
        }

        canvas { position: fixed; top: 0; left: 0; z-index: -1; }

        /* --- Screens --- */
        .screen {
            position: absolute; width: 85%; max-width: 400px;
            text-align: center; display: none; flex-direction: column; align-items: center;
            animation: fadeIn 0.8s forwards;
        }
        .active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        h1 { color: var(--rose-gold); font-weight: 300; margin-bottom: 10px; text-shadow: 0 0 15px var(--lavender); }
        p { color: #ddd; margin-bottom: 25px; font-size: 0.95rem; line-height: 1.4; }

        /* --- Buttons --- */
        .jar-btn { position: fixed; top: 25px; right: 25px; font-size: 32px; z-index: 100; cursor: pointer; }
        .bottle-btn { position: fixed; top: 25px; left: 25px; font-size: 32px; z-index: 100; cursor: pointer; }
        
        .pop-msg {
            position: fixed; top: 100px; left: 50%; transform: translateX(-50%);
            background: rgba(15, 12, 41, 0.95); padding: 20px; border-radius: 20px;
            border: 1px solid var(--gold); width: 85%; display: none; z-index: 101; text-align: center;
        }

        button, .snap-map-btn {
            background: rgba(255, 252, 0, 0.1); border: 1px solid var(--snapchat);
            color: var(--snapchat); padding: 14px 30px; border-radius: 35px; cursor: pointer;
            text-decoration: none; display: inline-block; font-size: 0.85rem; font-weight: bold;
            box-shadow: 0 0 15px rgba(255, 252, 0, 0.2); width: 100%;
        }

        #final-heart { font-size: 110px; margin: 20px 0; cursor: pointer; filter: drop-shadow(0 0 20px var(--rose-gold)); }
        
        .letter-box {
            background: rgba(0,0,0,0.8); padding: 25px; border-radius: 25px;
            border: 1px solid var(--rose-gold); text-align: left; font-size: 0.9rem;
            line-height: 1.7; display: none;
        }

        .action-links { display: flex; gap: 10px; margin-top: 20px; }
        .link-btn {
            text-decoration: none; font-size: 0.75rem; padding: 10px 15px; border-radius: 12px;
            flex: 1; text-align: center; border: 1px solid;
        }

        .rain-word {
            position: fixed; color: rgba(183, 148, 244, 0.2); font-size: 0.8rem;
            pointer-events: none; z-index: -1; animation: fall linear forwards;
        }
        @keyframes fall { to { transform: translateY(110vh); } }
    </style>
</head>
<body>

    <div id="galaxy-bg"><div class="nebula"></div></div>
    <div id="pulse-overlay"></div>
    <canvas id="starCanvas"></canvas>

    <div class="jar-btn" onclick="showJar()">ü´ô</div>
    <div class="bottle-btn" onclick="showBottle()">üçæ</div>
    <div id="toast" class="pop-msg"></div>

    <audio id="music" loop>
        <source src="https://www.chosic.com/wp-content/uploads/2021/04/Rain-and-Light-Piano.mp3" type="audio/mpeg">
    </audio>

    <div id="intro" class="screen active">
        <h1>Hey Babde</h1>
        <p>Take a deep breath with the galaxy. Me hamesha tujhya sobatch aahe, Shona.</p>
        <div style="font-size: 60px;">üåå</div>
        <button onclick="startApp()" style="margin-top:40px; border-color:var(--rose-gold); color:var(--rose-gold); background:none;">Enter Our Safe Space</button>
    </div>

    <div id="phase1" class="screen">
        <h1>Clear the Noise</h1>
        <div id="cloud-container" style="height: 250px; width: 100%; position: relative;"></div>
        <div id="truth" style="color:var(--gold); font-style:italic; min-height:40px;"></div>
        <button id="p1-next" style="display:none; margin-top:20px; border-color:var(--rose-gold); color:var(--rose-gold); background:none;" onclick="showScreen('phase2')">Our History</button>
    </div>

    <div id="phase2" class="screen">
        <h1>Always You</h1>
        <div style="width:100%; background:rgba(255,255,255,0.05); padding:15px; border-radius:15px; margin-bottom:15px; border: 1px solid var(--lavender);" onclick="showT('2015')">
            <h3 style="color:var(--gold)">2015</h3>
            <p id="t1" style="margin:0; font-size:0.85rem; color:#aaa;">Tap to see...</p>
        </div>
        <div style="width:100%; background:rgba(255,255,255,0.05); padding:15px; border-radius:15px; margin-bottom:15px; border: 1px solid var(--lavender);" onclick="showT('2024')">
            <h3 style="color:var(--gold)">Oct 2, 2024</h3>
            <p id="t2" style="margin:0; font-size:0.85rem; color:#aaa;">Tap to see...</p>
        </div>
        <button id="p2-next" style="display:none; border-color:var(--rose-gold); color:var(--rose-gold); background:none;" onclick="showScreen('finale')">My Eternal Promise</button>
    </div>

    <div id="finale" class="screen">
        <h1 id="f-title">Hold My Heart</h1>
        <div id="final-heart">‚ù§Ô∏è</div>
        <div id="letter" class="letter-box">
            <strong>My dearest Babde,</strong><br>
            Loved you since 2015. Oct 2, 2024 was my best day. I am intensely loyal to you, Siddhavi. Tu maza 'Home' aahes.<br><br>
            
            <a href="https://www.snapchat.com/add/shonee118" class="snap-map-btn">üìç Check My Live Distance </a>

            <div class="action-links">
                <a href="tel:9323229762" class="link-btn" style="color:var(--rose-gold); border-color:var(--rose-gold)">Call Me</a>
                <a href="https://www.snapchat.com/add/shonee118" class="link-btn" style="color:var(--snapchat); border-color:var(--snapchat)">Snap Chat</a>
            </div>
        </div>
    </div>

    <script>
        function startApp() { document.getElementById('music').play(); showScreen('phase1'); }

        const reasons = [
            "Siddhavi, you are the only one I've ever loved.",
            "You made every other girl unattractive to me.",
            "Tu mazhya sathi khup special aahes, mazhi universe tuch aahes.",
            "9 years zale, majha prem fakt tujhya sathi aahe.",
            "I will never leave you midway. I'm yours."
        ];

        function showJar() {
            const t = document.getElementById('toast');
            t.innerText = reasons[Math.floor(Math.random()*reasons.length)];
            t.style.display = 'block'; setTimeout(() => t.style.display='none', 4000);
        }

        function showBottle() {
            const t = document.getElementById('toast');
            t.innerText = "Truth: I am intensely loyal to you. Stay safe in my heart.";
            t.style.display = 'block'; setTimeout(() => t.style.display='none', 4000);
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'phase1') loadClouds();
            if(id === 'finale') startRain();
        }

        function loadClouds() {
            const container = document.getElementById('cloud-container');
            const labels = ["Fear", "Insecurity", "Doubt", "Comparison"];
            const truths = ["Only you.", "Loyal since 2015.", "I'm staying.", "You're the best."];
            labels.forEach((l, i) => {
                const c = document.createElement('div');
                c.className = 'cloud'; c.innerText = l;
                c.style.top = Math.random()*70+'%'; c.style.left = Math.random()*60+'%';
                c.onclick = () => {
                    c.style.display = 'none';
                    document.getElementById('truth').innerText = truths[i];
                    document.getElementById('p1-next').style.display = 'block';
                }
                container.appendChild(c);
            });
            // Force clouds to be visible on dark background
            document.querySelectorAll('.cloud').forEach(cl => {
                cl.style.background = "rgba(255,255,255,0.1)";
                cl.style.border = "1px solid rgba(255,255,255,0.2)";
                cl.style.padding = "10px 20px";
                cl.style.borderRadius = "20px";
            });
        }

        function showT(y) {
            if(y === '2015') document.getElementById('t1').innerText = "Nearly a decade of choosing you every day.";
            else document.getElementById('t2').innerText = "The day I promised to be yours forever.";
            document.getElementById('p2-next').style.display = 'block';
        }

        // Star Animation
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [];
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        for(let i=0; i<120; i++) stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*1.3, s: Math.random()*0.3});
        function animate() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "white";
            stars.forEach(st => {
                ctx.beginPath(); ctx.arc(st.x, st.y, st.r, 0, Math.PI*2); ctx.fill();
                st.y += st.s; if(st.y > canvas.height) st.y = 0;
            });
            requestAnimationFrame(animate);
        }
        animate();

        // Heart Logic
        const heart = document.getElementById('final-heart');
        let hProg = 0; let hTimer;
        heart.addEventListener('touchstart', (e) => {
            e.preventDefault();
            hTimer = setInterval(() => {
                hProg += 2; heart.style.transform = `scale(${1+(hProg/100)})`;
                if(hProg >= 100) { clearInterval(hTimer); win(); }
            }, 50);
        });
        heart.addEventListener('touchend', () => { clearInterval(hTimer); hProg = 0; heart.style.transform = 'scale(1)'; });

        function win() {
            heart.style.display = 'none'; document.getElementById('letter').style.display = 'block';
            document.getElementById('f-title').innerText = "Always Yours.";
        }

        function startRain() {
            setInterval(() => {
                const w = document.createElement('div');
                w.className = 'rain-word'; w.innerText = "Siddhavi";
                w.style.left = Math.random()*100+'vw'; w.style.top = '-20px';
                w.style.animationDuration = '6s'; document.body.appendChild(w);
                setTimeout(() => w.remove(), 6000);
            }, 2000);
        }
    </script>
</body>
</html>
